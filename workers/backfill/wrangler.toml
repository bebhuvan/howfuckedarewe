# Backfill Worker Configuration
# Imports historical data from OpenAQ

name = "aqi-backfill"
main = "src/index.ts"
compatibility_date = "2024-01-01"

# No cron trigger - this is HTTP-triggered manually
# Use /backfill endpoint with date range params

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "aqi-historical"
database_id = "fd2739c3-9278-46ea-a4e3-b5cb357c1195"

# Environment variables
[vars]
BACKFILL_BATCH_SIZE = "30"
BACKFILL_RATE_LIMIT_MS = "500"

# For local development
[env.dev]
name = "aqi-backfill-dev"

[[env.dev.d1_databases]]
binding = "DB"
database_name = "aqi-historical-dev"
database_id = "" # Fill in after creating dev database

# Aggregator Worker Configuration
# Computes daily and national aggregates from city data

name = "aqi-aggregator"
main = "src/index.ts"
compatibility_date = "2024-01-01"

# Scheduled triggers - run 15 minutes after each hour (after ingestion)
[triggers]
crons = ["15 * * * *"]

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "aqi-historical"
database_id = "fd2739c3-9278-46ea-a4e3-b5cb357c1195"

# Environment variables
[vars]
# Non-sensitive config

# For local development
[env.dev]
name = "aqi-aggregator-dev"

[[env.dev.d1_databases]]
binding = "DB"
database_name = "aqi-historical-dev"
database_id = "" # Fill in after creating dev database
